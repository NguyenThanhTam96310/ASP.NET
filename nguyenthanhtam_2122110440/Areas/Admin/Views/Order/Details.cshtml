@model nguyenthanhtam_2122110440.Models.OrderModel

@{
    ViewBag.Title = "Chi tiết đơn hàng";
}

<h2>Chi tiết đơn hàng</h2>

<div>
    <dl class="dl-horizontal">
        <dt>Đơn hàng:</dt>
        <dd>@Model.Order.Name</dd>

        <dt>Người dùng:</dt>
        <dd>@Model.Order.UserId</dd>

        <dt>Trạng thái:</dt>
        <dd>
            @switch (Model.Order.Status)
            {
                case 0:<span class="badge badge-warning">Chờ xử lý</span>; break;
                case 1: <span class="badge badge-success">Đã hoàn thành</span>; break;
                default: <span class="badge badge-danger">Hủy</span>; break;
            }
        </dd>

        <dt>Ngày đặt:</dt>
        <dd>@Model.Order.CreatedDate.ToString("dd/MM/yyyy HH:mm")</dd>
    </dl>

    <hr />

    <h4>Chi tiết sản phẩm</h4>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Tên sản phẩm</th>
                <th>Hình ảnh</th>
                <th>Số lượng</th>
                <th>Giá</th>
                <th>Thành tiền</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var detail in Model.OrderDetail)
            {
                var product = Model.lstProduct.FirstOrDefault(p => p.Id == detail.ProductId);
                if (product != null)
                {
                    <tr>    
                        <td>@product.Name</td>
                        <td>
                            <img src="@Url.Content("~/Content/images/product/" + product.Avatar)" alt="@product.Name" width="50" height="50" />
                        </td>
                        <td>@detail.Quantity</td>
                        <td>@String.Format("{0:0,0} $", product.Price)</td>
                        <td>@String.Format("{0:0,0} $", product.Price * detail.Quantity)</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<p>
    @Html.ActionLink("Quay lại danh sách", "Index")
</p>
